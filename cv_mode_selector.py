"""
CVæ£€æµ‹æ¨¡å¼ç®¡ç†
æä¾›ä¼ ç»ŸCVå’ŒYOLOä¸¤ç§æ¨¡å¼çš„åˆ‡æ¢å’Œç®¡ç†
"""
from enum import Enum


class CVDetectionMode(Enum):
    """CVæ£€æµ‹æ¨¡å¼æšä¸¾"""
    TRADITIONAL = "traditional"  # ä¼ ç»ŸCVæ¨¡å¼ï¼ˆOpenCVå›¾åƒå¤„ç†ï¼‰
    YOLO = "yolo"               # YOLOæ·±åº¦å­¦ä¹ æ¨¡å¼
    HYBRID = "hybrid"           # æ··åˆæ¨¡å¼ï¼ˆä¸¤ç§æ–¹æ³•ç»“åˆï¼‰


class CVModeConfig:
    """CVæ¨¡å¼é…ç½®ç±»"""
    
    def __init__(self, mode=CVDetectionMode.TRADITIONAL):
        """
        åˆå§‹åŒ–CVæ¨¡å¼é…ç½®
        
        Args:
            mode: CVæ£€æµ‹æ¨¡å¼ï¼ˆé»˜è®¤ä¸ºä¼ ç»ŸCVï¼‰
        """
        self.mode = mode
        self.config = self._get_mode_config()
    
    def _get_mode_config(self):
        """è·å–å½“å‰æ¨¡å¼çš„é…ç½®"""
        configs = {
            CVDetectionMode.TRADITIONAL: {
                'name': 'ä¼ ç»ŸCVæ¨¡å¼',
                'description': 'åŸºäºOpenCVçš„å›¾åƒå¤„ç†æ£€æµ‹ï¼Œæ— éœ€è®­ç»ƒæ¨¡å‹',
                'features': [
                    'å°åœ°å›¾æ•Œäººæ£€æµ‹ï¼ˆçº¢è‰²æ ‡è®°è¯†åˆ«ï¼‰',
                    'è¡€é‡çŠ¶æ€æ£€æµ‹ï¼ˆé¢œè‰²æ¯”ä¾‹åˆ†æï¼‰',
                    'å±é™©ä¿¡å·æ£€æµ‹ï¼ˆå½¢çŠ¶åŒ¹é…ï¼‰',
                    'æŠ€èƒ½å†·å´æ£€æµ‹ï¼ˆäº®åº¦åˆ†æï¼‰'
                ],
                'advantages': [
                    'âš¡ é€Ÿåº¦æå¿«ï¼ˆ~50msï¼‰',
                    'ğŸ“¦ æ— éœ€æ¨¡å‹æ–‡ä»¶',
                    'ğŸ’» CPUå ç”¨ä½ï¼ˆ5-10%ï¼‰',
                    'ğŸ¯ å›ºå®šUIæ£€æµ‹å‡†ç¡®',
                    'âœ… ç«‹å³å¯ç”¨'
                ],
                'limitations': [
                    'âŒ æ— æ³•æ£€æµ‹å¤æ‚åŠ¨ä½œ',
                    'âŒ å¯¹å…‰ç…§å˜åŒ–æ•æ„Ÿ',
                    'âŒ éœ€è¦è°ƒæ•´é¢œè‰²å‚æ•°'
                ],
                'use_cases': [
                    'å¿«é€Ÿè·å–å°åœ°å›¾ä¿¡æ¯',
                    'å®æ—¶ç›‘æ§è¡€é‡å’ŒæŠ€èƒ½',
                    'èµ„æºå—é™çš„è®¾å¤‡',
                    'ä¸éœ€è¦æ·±åº¦åˆ†æ'
                ]
            },
            
            CVDetectionMode.YOLO: {
                'name': 'YOLOæ·±åº¦å­¦ä¹ æ¨¡å¼',
                'description': 'åŸºäºYOLOç¥ç»ç½‘ç»œçš„ç›®æ ‡æ£€æµ‹ï¼Œéœ€è¦è®­ç»ƒæ¨¡å‹',
                'features': [
                    'è‹±é›„æ–½æ³•åŠ¨ä½œæ£€æµ‹',
                    'æŠ€èƒ½æŒ‡ç¤ºå™¨è¯†åˆ«',
                    'å¤æ‚åœºæ™¯ç†è§£',
                    'å¤šç›®æ ‡åŒæ—¶æ£€æµ‹'
                ],
                'advantages': [
                    'ğŸ¯ æ£€æµ‹å‡†ç¡®åº¦é«˜ï¼ˆ95%+ï¼‰',
                    'ğŸ” å¯è¯†åˆ«å¤æ‚åŠ¨ä½œ',
                    'ğŸ’ª é²æ£’æ€§å¼º',
                    'ğŸ“ˆ å¯æŒç»­è®­ç»ƒæ”¹è¿›',
                    'ğŸŒŸ é€‚åº”æ€§å¼º'
                ],
                'limitations': [
                    'â±ï¸ é€Ÿåº¦è¾ƒæ…¢ï¼ˆ~300msï¼‰',
                    'ğŸ“¦ éœ€è¦æ¨¡å‹æ–‡ä»¶ï¼ˆ~100MBï¼‰',
                    'ğŸ’» CPU/GPUå ç”¨é«˜ï¼ˆ30-50%ï¼‰',
                    'ğŸ“Š éœ€è¦è®­ç»ƒæ•°æ®',
                    'âš™ï¸ é…ç½®å¤æ‚'
                ],
                'use_cases': [
                    'ç²¾ç¡®è¯†åˆ«è‹±é›„åŠ¨ä½œ',
                    'åˆ†ææ¸¸æˆå½•åƒ',
                    'è®­ç»ƒAIåŠ©æ‰‹',
                    'é«˜ç²¾åº¦éœ€æ±‚åœºæ™¯'
                ]
            },
            
            CVDetectionMode.HYBRID: {
                'name': 'æ··åˆæ¨¡å¼',
                'description': 'ç»“åˆä¼ ç»ŸCVå’ŒYOLOçš„ä¼˜åŠ¿ï¼Œæ™ºèƒ½åˆ†é…æ£€æµ‹ä»»åŠ¡',
                'features': [
                    'ä¼ ç»ŸCVæ£€æµ‹å›ºå®šUIï¼ˆå°åœ°å›¾ã€è¡€æ¡ç­‰ï¼‰',
                    'YOLOæ£€æµ‹åŠ¨æ€å†…å®¹ï¼ˆè‹±é›„åŠ¨ä½œç­‰ï¼‰',
                    'æ™ºèƒ½ä»»åŠ¡åˆ†é…',
                    'æ€§èƒ½ä¼˜åŒ–'
                ],
                'advantages': [
                    'ğŸš€ æ€§èƒ½å‡è¡¡ï¼ˆ~200msï¼‰',
                    'ğŸ¯ å‡†ç¡®åº¦é«˜',
                    'ğŸ’¡ å„å–æ‰€é•¿',
                    'âš–ï¸ èµ„æºå ç”¨é€‚ä¸­',
                    'âœ¨ æ¨èä½¿ç”¨'
                ],
                'limitations': [
                    'âš™ï¸ éœ€è¦ä¸¤å¥—ç³»ç»Ÿ',
                    'ğŸ”§ é…ç½®ç¨å¤æ‚'
                ],
                'use_cases': [
                    'æ—¥å¸¸æ¸¸æˆä½¿ç”¨',
                    'å®æ—¶è¾…åŠ©',
                    'å¹³è¡¡æ€§èƒ½å’Œå‡†ç¡®åº¦',
                    'æ¨èé»˜è®¤æ¨¡å¼'
                ]
            }
        }
        
        return configs.get(self.mode, configs[CVDetectionMode.TRADITIONAL])
    
    def print_info(self):
        """æ‰“å°å½“å‰æ¨¡å¼ä¿¡æ¯"""
        print("\n" + "=" * 70)
        print(f"ğŸ“‹ {self.config['name']}")
        print("=" * 70)
        print(f"\nğŸ“ æè¿°: {self.config['description']}")
        
        print("\nâœ¨ åŠŸèƒ½:")
        for feature in self.config['features']:
            print(f"   â€¢ {feature}")
        
        print("\nâœ… ä¼˜åŠ¿:")
        for advantage in self.config['advantages']:
            print(f"   {advantage}")
        
        print("\nâš ï¸ é™åˆ¶:")
        for limitation in self.config['limitations']:
            print(f"   {limitation}")
        
        print("\nğŸ¯ é€‚ç”¨åœºæ™¯:")
        for use_case in self.config['use_cases']:
            print(f"   â€¢ {use_case}")
        
        print("=" * 70 + "\n")
    
    def switch_mode(self, new_mode):
        """
        åˆ‡æ¢æ£€æµ‹æ¨¡å¼
        
        Args:
            new_mode: æ–°çš„æ£€æµ‹æ¨¡å¼
        """
        if not isinstance(new_mode, CVDetectionMode):
            raise ValueError(f"æ— æ•ˆçš„æ¨¡å¼: {new_mode}")
        
        old_mode = self.mode
        self.mode = new_mode
        self.config = self._get_mode_config()
        
        print(f"\nâœ… æ£€æµ‹æ¨¡å¼å·²åˆ‡æ¢: {old_mode.value} â†’ {new_mode.value}")
        self.print_info()


def compare_modes():
    """å¯¹æ¯”ä¸‰ç§æ£€æµ‹æ¨¡å¼"""
    print("\n" + "=" * 70)
    print("ğŸ“Š CVæ£€æµ‹æ¨¡å¼å¯¹æ¯”")
    print("=" * 70)
    
    comparison = """
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   å¯¹æ¯”é¡¹    â”‚   ä¼ ç»ŸCV     â”‚     YOLO     â”‚   æ··åˆæ¨¡å¼   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ æ£€æµ‹é€Ÿåº¦    â”‚   âš¡âš¡âš¡âš¡âš¡   â”‚     âš¡âš¡     â”‚    âš¡âš¡âš¡âš¡   â”‚
â”‚             â”‚    ~50ms     â”‚   ~300ms     â”‚   ~200ms     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ å‡†ç¡®åº¦      â”‚    â­â­â­    â”‚   â­â­â­â­â­  â”‚   â­â­â­â­â­  â”‚
â”‚             â”‚    80-85%    â”‚    95%+      â”‚    90-95%    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ CPUå ç”¨     â”‚   ğŸ’»ğŸ’»      â”‚   ğŸ’»ğŸ’»ğŸ’»ğŸ’»   â”‚   ğŸ’»ğŸ’»ğŸ’»    â”‚
â”‚             â”‚    5-10%     â”‚   30-50%     â”‚   15-25%     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ æ¨¡å‹éœ€æ±‚    â”‚      æ—       â”‚     å¿…éœ€     â”‚   å¯é€‰/å¿…éœ€  â”‚
â”‚             â”‚      0MB     â”‚   ~100MB     â”‚   ~100MB     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ è®­ç»ƒæ•°æ®    â”‚      æ—       â”‚     å¿…éœ€     â”‚   å¯é€‰/å¿…éœ€  â”‚
â”‚             â”‚   ç«‹å³å¯ç”¨   â”‚   éœ€æ ‡æ³¨     â”‚  éƒ¨åˆ†éœ€è¦    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ æ£€æµ‹èƒ½åŠ›    â”‚   åŸºç¡€UI     â”‚   å…¨é¢è¯†åˆ«   â”‚  å…¨é¢è¯†åˆ«    â”‚
â”‚             â”‚  å°åœ°å›¾è¡€æ¡  â”‚ åŠ¨ä½œ+UI+åœºæ™¯ â”‚ åŠ¨ä½œ+UI+åœºæ™¯ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ é€‚ç”¨åœºæ™¯    â”‚  å¿«é€Ÿæµ‹è¯•    â”‚  é«˜ç²¾åº¦éœ€æ±‚  â”‚  æ—¥å¸¸ä½¿ç”¨    â”‚
â”‚             â”‚  èµ„æºå—é™    â”‚  ç¦»çº¿åˆ†æ    â”‚  æ¨èé»˜è®¤    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
"""
    print(comparison)
    
    print("\nğŸ’¡ æ¨èé€‰æ‹©:")
    print("   â€¢ ğŸš€ åˆšå¼€å§‹ä½¿ç”¨: ä¼ ç»ŸCVæ¨¡å¼ï¼ˆç«‹å³å¯ç”¨ï¼‰")
    print("   â€¢ ğŸ¯ è¿½æ±‚ç²¾åº¦: YOLOæ¨¡å¼ï¼ˆéœ€è®­ç»ƒæ¨¡å‹ï¼‰")
    print("   â€¢ âœ¨ æ—¥å¸¸ä½¿ç”¨: æ··åˆæ¨¡å¼ï¼ˆæœ€ä½³å¹³è¡¡ï¼‰")
    print("=" * 70 + "\n")


def get_mode_selector():
    """äº¤äº’å¼æ¨¡å¼é€‰æ‹©å™¨"""
    print("\n" + "=" * 70)
    print("ğŸ® CVæ£€æµ‹æ¨¡å¼é€‰æ‹©")
    print("=" * 70)
    
    print("\nè¯·é€‰æ‹©æ£€æµ‹æ¨¡å¼:")
    print("  1. ä¼ ç»ŸCVæ¨¡å¼ âš¡ (æ¨èæ–°æ‰‹)")
    print("  2. YOLOæ¨¡å¼ ğŸ¯")
    print("  3. æ··åˆæ¨¡å¼ ğŸš€ (æ¨è)")
    print("  4. æŸ¥çœ‹æ¨¡å¼å¯¹æ¯”")
    print("  0. é€€å‡º")
    
    while True:
        choice = input("\nè¯·è¾“å…¥é€‰é¡¹ (0-4): ").strip()
        
        if choice == '0':
            print("ğŸ‘‹ é€€å‡ºæ¨¡å¼é€‰æ‹©")
            return None
        elif choice == '1':
            return CVDetectionMode.TRADITIONAL
        elif choice == '2':
            return CVDetectionMode.YOLO
        elif choice == '3':
            return CVDetectionMode.HYBRID
        elif choice == '4':
            compare_modes()
        else:
            print("âŒ æ— æ•ˆé€‰é¡¹ï¼Œè¯·é‡æ–°è¾“å…¥")


if __name__ == "__main__":
    # æ¼”ç¤ºæ¨¡å¼é…ç½®
    print("ğŸ® CVæ£€æµ‹æ¨¡å¼ç®¡ç†ç³»ç»Ÿ")
    
    # 1. å±•ç¤ºæ‰€æœ‰æ¨¡å¼
    for mode in CVDetectionMode:
        config = CVModeConfig(mode)
        config.print_info()
    
    # 2. å¯¹æ¯”æ¨¡å¼
    compare_modes()
    
    # 3. äº¤äº’å¼é€‰æ‹©
    selected_mode = get_mode_selector()
    if selected_mode:
        config = CVModeConfig(selected_mode)
        print(f"\nâœ… æ‚¨é€‰æ‹©äº†: {config.config['name']}")
        config.print_info()
