# 🎮 LOLHelper 新功能使用指南

## 📌 快速开始

### 1. 启动应用
```bash
python app_new.py
# 或者
python app.py
```

### 2. 访问主页
浏览器自动打开: `http://localhost:5000`

---

## ✨ 功能一览

### 🔍 功能1: 查看召唤师详细战绩

**使用场景**: 想深入了解某个玩家的历史表现

**操作步骤**:
1. 在主页点击 **"敌我分析"** 按钮
2. 进入选人/游戏阶段，等待系统自动分析
3. 队友/敌人列表会显示在右侧面板
4. **点击任意召唤师的昵称**（蓝色/红色文字）
5. 自动跳转到该召唤师的详细战绩页面

**展示内容**:
- 📊 战绩统计（总场次、胜率、平均KDA）
- 🎮 最常使用的英雄
- 📝 最近20场比赛详情
- 🏆 每场比赛的胜负、KDA、金币、补刀等

**页面地址示例**:
```
http://localhost:5000/summoner/召唤师2321%2355777
```

---

### 🎯 功能2: 实时游戏详情监控

**使用场景**: 游戏中想实时查看所有玩家的装备、KDA、符文等信息

**操作步骤**:
1. 进入游戏（对局开始）
2. 在主页点击 **"查看实时游戏详情"** 按钮（蓝色按钮）
3. 新标签页自动打开实时监控页面
4. 页面每2秒自动刷新数据

**展示内容**:
- ⏱️ 游戏时间（实时倒计时）
- 🗺️ 游戏模式和地图
- 👥 ORDER队和CHAOS队所有玩家
- 📦 每个玩家的装备图标
- 🎯 实时KDA和补刀
- 🔮 符文配置（基石+主副系）
- ⚡ 最近击杀事件
- 💀 死亡状态和复活倒计时
- 🌟 高亮显示当前玩家（黄色背景）

**特别功能**:
- 可点击任意玩家名称跳转到其详细战绩
- 死亡玩家半透明红色背景显示
- 装备图标悬停显示物品名称

**页面地址**:
```
http://localhost:5000/live_game
```

---

## 🖱️ 交互说明

### 主页面增强
- **队友名称**: 🔵 蓝色文字 + 可点击
- **敌人名称**: 🔴 红色文字 + 可点击
- **悬停提示**: 鼠标放上去显示 "点击查看详细战绩"

### 实时游戏页面
- **刷新按钮**: 右上角蓝色按钮，手动刷新数据
- **自动刷新**: 每2秒自动更新（无需手动刷新）
- **玩家卡片**: 悬停时上浮效果

---

## 📊 数据说明

### 实时游戏数据来源
- **端口**: `https://127.0.0.1:2999`
- **API**: `/liveclientdata/allgamedata`
- **更新频率**: 每2秒自动获取

### 战绩数据来源
- **API**: LCU客户端API（动态端口）
- **数量**: 显示最近20场对局

---

## 🎨 界面特色

### 召唤师详细战绩页面
- ✅ 胜利: 绿色渐变背景
- ❌ 失败: 红色渐变背景
- 🔝 悬停: 卡片上浮动画
- 📈 胜率颜色:
  - 绿色: ≥50%
  - 红色: <50%
- 🎯 KDA颜色:
  - 绿色: ≥3.0
  - 蓝色: ≥2.0
  - 黄色: <2.0

### 实时游戏页面
- 🔵 **ORDER队**: 蓝色边框
- 🔴 **CHAOS队**: 红色边框
- 🌟 **当前玩家**: 黄色高亮背景
- 💀 **死亡玩家**: 半透明红色背景 + 复活倒计时

---

## ⚙️ 常见问题

### Q1: 点击召唤师名称没反应？
**A**: 确保你已经点击了"敌我分析"按钮，并且系统已经检测到队友/敌人。

### Q2: 实时游戏页面显示"未在游戏中"？
**A**: 
- 确保游戏已经开始（不是选人阶段）
- 游戏客户端API（端口2999）需要游戏运行才可用
- 尝试点击"刷新"按钮

### Q3: 图标加载失败？
**A**: 
- 检查网络连接
- DDragon CDN可能暂时不可用
- 系统会自动使用默认图标

### Q4: 战绩数据不更新？
**A**: 
- 关闭页面重新打开
- 确保LCU客户端已连接（主页显示绿色"成功连接"）

### Q5: 如何关闭自动刷新？
**A**: 目前自动刷新是固定的，关闭标签页即可停止。

---

## 🔧 技术细节

### 新增文件
```
templates/
  ├── summoner_detail.html   # 召唤师详细战绩页面
  └── live_game.html          # 实时游戏监控页面

utils/
  └── game_data_formatter.py  # 游戏数据格式化工具

routes/
  └── api_routes.py           # (已更新) 新增3个路由

static/js/
  └── main.js                 # (已更新) 添加点击跳转功能
```

### 新增API端点
1. `GET /summoner/<name>` - 召唤师详细战绩页面
2. `GET /live_game` - 实时游戏监控页面
3. `GET /get_live_game_data` - 获取实时游戏数据API

---

## 📸 效果预览

### 主页面更新
```
队友列表:
┌─────────────────────────────┐
│ 👥 本局队友分析:              │
├─────────────────────────────┤
│ [召唤师名称#TAG] ← 可点击      │
│ 最近10场: 6胜4败 (60%)        │
│ 平均KDA: 3.5                 │
│ 上局: 胜                     │
└─────────────────────────────┘
```

### 实时游戏页面布局
```
┌──────────────────────────────────────┐
│  游戏模式: URF  |  时间: 04:35  |  地图  │
├──────────────────────────────────────┤
│                                      │
│  🔵 ORDER队        🔴 CHAOS队        │
│  ┌────────────┐   ┌────────────┐    │
│  │ 玩家1       │   │ 玩家6       │    │
│  │ 装备+符文   │   │ 装备+符文   │    │
│  └────────────┘   └────────────┘    │
│  ┌────────────┐   ┌────────────┐    │
│  │ 玩家2       │   │ 玩家7       │    │
│  └────────────┘   └────────────┘    │
│  ...            ...               │
└──────────────────────────────────────┘
```

---

## 🚀 下一步

1. **测试功能**: 启动应用，进入游戏测试
2. **提供反馈**: 发现问题或有改进建议请反馈
3. **扩展功能**: 参考 UPDATE_LOG.md 查看未来计划

---

## 📞 技术支持

如有问题，请检查:
1. Python版本 ≥ 3.7
2. 依赖库已安装: `pip install flask flask-socketio requests`
3. 游戏客户端已启动
4. 端口5000和2999未被占用

---

**祝你游戏愉快! 🎉**
